From d2c052a85347477866cee5808f7c6244d3d133b2 Mon Sep 17 00:00:00 2001
From: Cyprian Lech <clech@plume.com>
Date: Mon, 27 Apr 2020 10:06:53 +0000
Subject: [PATCH 1/7] inet: start dhcps always

This patch enables the dhcp server by default. 3rd party platforms
(for instance RDK-based) need this, as the dhcp server is independent of
OpenSync there.
---
 src/lib/inet/src/inet_base.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/src/lib/inet/src/inet_base.c b/src/lib/inet/src/inet_base.c
index a93cefc..66387d7 100644
--- a/src/lib/inet/src/inet_base.c
+++ b/src/lib/inet/src/inet_base.c
@@ -412,7 +412,7 @@ bool inet_base_init(inet_base_t *self, const char *ifname)
                                     inet_unit_s(INET_BASE_NETWORK,
                                                 inet_unit_s(INET_BASE_SCHEME_NONE, NULL),
                                                 inet_unit(INET_BASE_SCHEME_STATIC,
-                                                          inet_unit(INET_BASE_DHCP_SERVER, NULL),
+                                                          inet_unit_s(INET_BASE_DHCP_SERVER, NULL),
                                                           inet_unit(INET_BASE_DNS, NULL),
                                                           NULL),
                                                 inet_unit(INET_BASE_SCHEME_DHCP, NULL),
@@ -1769,8 +1769,6 @@ bool inet_base_dhcp_server_commit(inet_base_t *self, bool start)
     if (self->in_dhcps != NULL) osn_dhcp_server_del(self->in_dhcps);
     self->in_dhcps = NULL;
 
-    if (!start) return true;
-
     /*
      * Create new DHCPv4 object
      */
-- 
2.25.1

